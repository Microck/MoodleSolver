# MoodleSolver Extension

**Version:** 1.5.3

A browser extension designed to aid in the analysis and interaction with web-based assessments, particularly those on Moodle platforms. It allows users to scrape question data, leverage AI services to determine answers, and automate interactions. This tool is intended for educational, research, or security testing purposes on platforms where you have explicit permission to conduct such automated testing.

**Disclaimer:** *This tool automates interactions with web pages and AI services. Users are solely responsible for ensuring their use complies with the terms of service of any targeted website (e.g., Moodle instances) and any AI service provider. Misuse of this tool for academic dishonesty or unauthorized activities is strictly discouraged and is the responsibility of the user. API keys for AI services are required and are subject to the respective provider's terms and usage limits.*

![MoodleSolver](https://github.com/user-attachments/assets/c2767922-2b69-4135-bbc7-6394e9e9c3a2)

## Core Features

*   **Multi-Page Quiz Data Acquisition (`Alt+Shift+I`):**
    *   Navigates through all pages of a Moodle quiz.
    *   Scrapes question text and multiple-choice options from each page.
    *   **Batch AI Processing:** Sends all scraped questions in a **single, consolidated prompt** to the configured AI service (AIMLAPI.com).
    *   Parses the AI's batch response to determine a suggested answer for each question.
    *   Stores all scraped data and AI-determined answers locally for subsequent actions.
*   **Targeted Answer Selection (`Alt+Shift+X`):**
    *   Ensures all quiz data has been scraped and AI-processed (runs the `Alt+Shift+I` logic if needed).
    *   Identifies the question currently displayed on the webpage.
    *   Retrieves the pre-calculated AI answer for that specific question from the stored data (generated by `Alt+Shift+I`).
    *   Automatically selects the corresponding answer option on the page.
    *   If data hasn't been fully processed, this command will trigger the full data acquisition and batch AI processing first.
*   **Data Readiness Check (`Alt+Shift+C`):**
    *   Ensures that all quiz questions have been scraped and processed by the AI in a batch. Triggers the full process if needed.
    *   This command does not directly interact with the webpage to select answers.
*   **Clear Stored Data (`Alt+Shift+R`):**
    *   Allows users to clear all locally stored quiz data, including scraped questions and AI-determined answers.
    *   **Crucially, this should be done before starting a new quiz attempt to ensure fresh data is scraped and processed.**
*   **Configurable Settings:**
    *   Option to provide an API key and select a model for AIMLAPI.com.
    *   Option to configure the delay between page navigations during the multi-page scraping process.
*   **In-Popup Debugging:**
    *   Provides a debug log within the extension's popup to monitor operations and troubleshoot issues.

## Installation Guide (for Chrome/Chromium-based browsers)

1.  **Download/Clone:** Obtain all extension files. The necessary files include:
    *   `manifest.json`
    *   `background.js`
    *   `content_script.js`
    *   `options.html`
    *   `options.js`
    *   `popup.html`
    *   `popup.js`
    *   `styles.css`
    *   `images` folder
2.  **Open Extensions Page:** In your browser, type `chrome://extensions` into the address bar and press Enter.
3.  **Enable Developer Mode:** Locate the "Developer mode" toggle (usually in the top-right corner) and switch it ON.
4.  **Load Unpacked Extension:**
    *   Click the "Load unpacked" button.
    *   In the file dialog, navigate to the folder containing all the MoodleSolver extension files and select this folder.
5.  **Verify Installation:** The "MoodleSolver" extension should now appear in your list of installed extensions, and its icon should be visible in your browser's toolbar.

## Configuration Steps

**Crucial:** You must configure the AIMLAPI.com service and provide an API key before the AI-related features will work.

1.  **Access Options Page:**
    *   Right-click the MoodleSolver icon in your browser toolbar and select "Options".
    *   Alternatively, go to `chrome://extensions`, find MoodleSolver, click "Details", then "Extension options".
2.  **Set Inter-Page Delay:**
    *   Enter a value (in milliseconds) for the "Inter-Page Scraping Delay". This controls the pause between navigating to each new page when using `Alt+Shift+I`. Recommended values are between 300ms and 1500ms. Adjust based on Educastur's responsiveness.
3.  **AIMLAPI.com Configuration:**
    *   Input your valid AIMLAPI.com API key into the field.
    *   Select your desired AIMLAPI.com model (e.g., `gpt-4o-mini`). Ensure the model identifier is exactly as provided by AIMLAPI.com.
4.  **Save:** Click the "Save Configuration" button. A confirmation message should appear.

**Important Notes on AI Services:**
*   You are responsible for obtaining your AIMLAPI.com API key.
*   Be aware of AIMLAPI.com's usage limits, rate limits, and terms of service (especially for free tiers).
*   The "Batch AI Processing" feature makes only **one API call** for all questions in a quiz. Ensure your chosen model's context window can accommodate the entire quiz (all questions + options + prompt).
*   The accuracy of AI-suggested answers depends on the AI model's capabilities and the clarity of the quiz questions.

## How to Use MoodleSolver (Hotkeys)

All primary functions are triggered by hotkeys when you are on an active Moodle quiz page*

**Before starting a new quiz attempt, you MUST clear the stored data using `Alt+Shift+R` to ensure fresh data is scraped and processed.**

*   **`Alt+Shift+I`**: **Get All Test Data & Process with AI (Batch)**
    *   **Action:** Navigate to the first page of a quiz. Use this command to initiate the full process: scrape all questions, send them in a batch to AIMLAPI.com, parse the response, and store the results.
    *   **Use Case:** Run this once at the beginning of each new quiz attempt.

*   **`Alt+Shift+X`**: **Select AI Answer for Current Page**
    *   **Action:** After running `Alt+Shift+I`, navigate to any question page. Use this command to look up the AI's pre-calculated answer for the current question in storage and select it on the page. If data hasn't been fully processed, it will trigger `Alt+Shift+I` first.
    *   **Use Case:** Use on individual question pages to apply the AI-suggested answer.

*   **`Alt+Shift+C`**: **Ensure All Data Processed**
    *   **Action:** Primarily ensures that the `Alt+Shift+I` logic (full scrape and batch AI processing) has been completed for the current quiz attempt.
    *   **Use Case:** A redundant check or alternative trigger for data readiness if `Alt+Shift+I` wasn't used or needs to be forced.

*   **`Alt+Shift+R`**: **Clear Stored Quiz Data**
    *   **Action:** Deletes all locally stored quiz data (questions, options, AI answers).
    *   **Use Case:** **CRITICAL before starting a new quiz attempt** to prevent using data from a previous quiz.

## Troubleshooting

*   **Extension Not Working / Greyed Out:** ... (remain the same)
*   **Hotkeys Unresponsive:** ... (remain the same)
*   **Data Scraping Issues (e.g., wrong number of questions/options, no data):**
    *   Check the content script console for errors.
*   **AI Errors / No AI Answers:**
    *   Verify API key and selected model in Options.
    *   Check debug log for API errors (rate limits, etc.).
    *   Ensure your chosen AIMLAPI model's context window is sufficient for the batch prompt.
    *   The batch prompt might not be parsed correctly by the AI.
*   **"Receiving end does not exist" (Background Console Error):** ... (remain the same)
*   **'Current Q text ... not found in pre-processed data' error during `Alt+Shift+X`:**
    *   Indicates a mismatch between the live scraped question text and the text stored from the batch scrape. This might be due to minor site variations or inconsistencies, or a parsing issue. Try `Alt+Shift+R` then `Alt+Shift+I` again.

## Disclaimer

This extension was made and programmed to work with Educastur Aulas Virtuales. The CSS selectors in `content_script.js` are tailored to Educastur Aulas Virtuales, aswell as multiple other sections of code. They may not work on other Moodle sites, but you're free to manually modify and tailor the code to your selected Moodle page. Don't use this tool for academic dishonesty or cheating, I do not condone or support such activities.

